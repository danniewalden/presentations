/* pro-vibrant-dark.css â€” Vibrant Dark (B1 Cyan+Magenta) + Bottom Glow (G2)
   Obsidian Advanced Slides (Reveal.js)
   - Animated dual-layer grid (parallax)
   - Diagonal light sweep (subtle)
   - Bottom stage glow (cinematic)
   - Faint film grain (anti-flat)
   - Neon but presentation-safe
*/

/* ---------- Tokens (tweak freely) ---------- */
:root,
.theme-dark {
  --slide-font: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  --mono-font: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* Base backdrop gradient */
  --bg-1: #070a12;  /* deeper ink */
  --bg-2: #0b1222;  /* blue-ink */
  --bg-gradient: radial-gradient(1200px 800px at 20% 10%, #10204a 0%, transparent 50%),
                 radial-gradient(1200px 800px at 80% 90%, #1a0f3c 0%, transparent 50%),
                 linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 100%);

  /* Text */
  --fg: #e6eaf3;
  --muted: #a7b0c3;

  /* Neon accents (B1: Cyan + Magenta) */
  --accent:  #7cfff5;   /* cyan */
  --accent2: #f472b6;   /* magenta/pink */
  --accent3: #a78bfa;   /* support violet */

  /* Surfaces */
  --card-bg: rgba(255,255,255,0.04);
  --card-border: rgba(255,255,255,0.10);

  /* Code */
  --code-bg: #0a0f1e;
  --code-fg: #e9eef7;

  --radius: 18px;
  --shadow: 0 10px 30px rgba(0,0,0,0.45);

  --h1: 66px;
  --h2: 44px;
  --h3: 30px;
  --body: 26px;
  --small: 20px;
}

/* ---------- Global canvas + animated layers ---------- */
body {
  position: relative;
  background: var(--bg-gradient) !important;
  color: var(--fg);
  font-family: var(--slide-font);
}

/* Layer 1: subtle large grid (slow) */
body::before {
  content: "";
  position: fixed;
  inset: -60px;             /* bleed to avoid edges */
  z-index: 0;
  pointer-events: none;
  opacity: 0.11;
  background:
    linear-gradient(rgba(124,255,245,0.06) 1px, transparent 1px) 0 0 / 48px 48px,
    linear-gradient(90deg, rgba(244,114,182,0.06) 1px, transparent 1px) 0 0 / 48px 48px;
  animation: gridDriftA 38s linear infinite;
  will-change: transform;
}

/* Layer 2: tighter grid with glow (faster) */
body::after {
  content: "";
  position: fixed;
  inset: -60px;
  z-index: 0;
  pointer-events: none;
  opacity: 0.16;
  filter: drop-shadow(0 0 8px rgba(124,255,245,0.15));
  background:
    linear-gradient(rgba(124,255,245,0.08) 1px, transparent 1px) 0 0 / 30px 30px,
    linear-gradient(90deg, rgba(244,114,182,0.08) 1px, transparent 1px) 0 0 / 30px 30px;
  animation: gridDriftB 26s linear infinite;
  will-change: transform;
}

/* Layer 3: diagonal light sweep (very subtle) */
.reveal:before {
  content: "";
  position: fixed;
  inset: -20%;
  z-index: 0;
  pointer-events: none;
  background:
    linear-gradient(115deg, rgba(124,255,245,0.00) 20%, rgba(124,255,245,0.10) 45%, rgba(124,255,245,0.00) 70%),
    linear-gradient(115deg, rgba(244,114,182,0.00) 25%, rgba(244,114,182,0.08) 50%, rgba(244,114,182,0.00) 75%);
  animation: sweep 32s ease-in-out infinite;
}

/* Layer 4: bottom stage glow (G2) */
.reveal:after {
  content: "";
  position: fixed;
  left: -20%; right: -20%;
  bottom: -10%;
  height: 45%;
  z-index: 0;
  pointer-events: none;
  background:
    radial-gradient(60% 100% at 50% 100%,
      rgba(124,255,245,0.24) 0%,
      rgba(124,255,245,0.10) 40%,
      rgba(244,114,182,0.10) 65%,
      rgba(10,16,30,0.00) 85%);
  filter: blur(18px);
}

/* Layer 5: faint film grain (anti-flat) */
html::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  opacity: 0.05;
  background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'>\
<filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='2' stitchTiles='stitch'/></filter>\
<rect width='100%' height='100%' filter='url(#n)' opacity='0.3'/></svg>");
  mix-blend-mode: overlay;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  body::before, body::after, .reveal:before { animation: none; }
}

/* Grid + sweep animations */
@keyframes gridDriftA {
  0%   { transform: translate3d(0, 0, 0) scale(1); }
  50%  { transform: translate3d(-18px, -12px, 0) scale(1.004); }
  100% { transform: translate3d(0, 0, 0) scale(1); }
}
@keyframes gridDriftB {
  0%   { transform: translate3d(0, 0, 0) scale(1); }
  50%  { transform: translate3d(16px, 10px, 0) scale(1.004); }
  100% { transform: translate3d(0, 0, 0) scale(1); }
}
@keyframes sweep {
  0%, 100% { transform: translateX(-8%) translateY(0) rotate(0.001deg); opacity: 0.75; }
  50%      { transform: translateX(8%) translateY(-2%) rotate(0.001deg); opacity: 1; }
}

/* Ensure slides sit above background layers */
.reveal, .reveal-viewport, .reveal .backgrounds { background: transparent !important; }
.reveal { position: relative; z-index: 1; }
.reveal .slides {
  background: transparent !important;
  color: var(--fg);
  font-family: var(--slide-font);
  font-size: var(--body);
  line-height: 1.35;
  padding: 0 56px;
}

/* ---------- Headings ---------- */
.reveal h1, .reveal h2, .reveal h3 {
  letter-spacing: -0.02em;
  line-height: 1.08;
  font-weight: 900;
  margin: 0 0 10px 0;
}
.reveal h1 {
  font-size: var(--h1);
  background: linear-gradient(90deg, var(--accent), var(--accent2), var(--accent3));
  -webkit-background-clip: text; background-clip: text; color: transparent;
  text-shadow: 0 0 22px rgba(124,255,245,0.18);
}
.reveal h2 { font-size: var(--h2); color: var(--fg); }
.reveal h3 { font-size: var(--h3); color: var(--fg); }

.reveal h2::after, .reveal h3::after {
  content: "";
  display: block;
  width: 140px; height: 3px;
  margin-top: 10px;
  background: linear-gradient(90deg, var(--accent), var(--accent2), var(--accent3));
  border-radius: 3px;
  box-shadow: 0 0 16px rgba(124,255,245,0.35);
}

/* ---------- Text / links / lists ---------- */
.reveal p { color: var(--fg); }
.reveal small, .reveal .small { font-size: var(--small); color: var(--muted); }
.reveal a { color: var(--accent); text-decoration: none; }
.reveal a:hover { text-decoration: underline; text-underline-offset: 2px; }
.reveal ul, .reveal ol { margin: 12px 0 0 26px; }
.reveal li { margin: 8px 0; }

/* ---------- Containers ---------- */
.card, .figure, .two-col .col, .section-title {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  backdrop-filter: blur(8px);
}

/* Section banner glow */
.section-title {
  padding: 28px;
  position: relative;
}
.section-title::before {
  content: "";
  position: absolute; inset: -1px;
  border-radius: calc(var(--radius) + 2px);
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  z-index: -1; filter: blur(10px); opacity: 0.35;
}

/* ---------- Images / Excalidraw ---------- */
.reveal section img {
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  max-width: 100%;
  height: auto;
}
.reveal section img.excalidraw, .excalidraw-fit img {
  display: block; margin: 0 auto;
  max-height: 70vh; object-fit: contain;
}

.figure { padding: 18px; }
.figure > figcaption {
  margin-top: 10px; text-align: center;
  color: var(--muted); font-size: var(--small);
}

/* ---------- Layout helpers ---------- */
.two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 28px; align-items: start; }
.two-col .col { padding: 20px; }

.img-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 18px; }

.big-idea {
  font-size: 46px; font-weight: 900; line-height: 1.08;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  -webkit-background-clip: text; background-clip: text; color: transparent;
  text-shadow: 0 0 22px rgba(124,255,245,0.15);
}
.block-quote {
  font-size: 32px; font-style: italic; color: var(--muted);
  border-left: 6px solid var(--accent);
  padding-left: 18px;
}

/* ---------- Code blocks ---------- */
.reveal pre {
  background: var(--code-bg) !important;
  color: var(--code-fg) !important;
  border-radius: 16px !important;
  padding: 20px 22px !important;
  box-shadow: 0 10px 34px rgba(0,0,0,0.55), 0 0 36px rgba(124,255,245,0.16);
  font-size: 18px !important;
  line-height: 1.38 !important;
  overflow-x: auto !important;
}
.reveal code, .reveal pre code { font-family: var(--mono-font) !important; }

/* Token colors (works with highlightTheme: dracula/monokai) */
.reveal .hljs                        { color: #e9eef7; }
.reveal .hljs-keyword,
.reveal .hljs-selector-tag,
.reveal .hljs-literal                { color: #a78bfa; font-weight: 700; }
.reveal .hljs-title,
.reveal .hljs-name,
.reveal .hljs-type                   { color: #7cfff5; }
.reveal .hljs-attr,
.reveal .hljs-attribute              { color: #22d3ee; }
.reveal .hljs-string,
.reveal .hljs-meta .hljs-string      { color: #34d399; }
.reveal .hljs-number                 { color: #f59e0b; }
.reveal .hljs-built_in,
.reveal .hljs-class .hljs-title      { color: #f472b6; }
.reveal .hljs-comment                { color: #94a3b8; font-style: italic; }

/* ---------- Footer ---------- */
.slide-footer {
  position: absolute; bottom: 14px; left: 28px; right: 28px;
  display: flex; justify-content: space-between; align-items: center;
  color: var(--muted); font-size: 18px;
  border-top: 1px dashed var(--card-border);
  padding-top: 8px;
}

/* ---------- Utilities ---------- */
.mt-0 { margin-top: 0 !important; } .mt-1 { margin-top: 8px !important; }
.mt-2 { margin-top: 16px !important; } .mt-3 { margin-top: 24px !important; }
.mt-4 { margin-top: 32px !important; }
.mb-0 { margin-bottom: 0 !important; } .mb-1 { margin-bottom: 8px !important; }
.mb-2 { margin-bottom: 16px !important; } .mb-3 { margin-bottom: 24px !important; }
.mb-4 { margin-bottom: 32px !important; }

.kbd {
  border: 1px solid var(--card-border);
  border-bottom-width: 3px;
  padding: 2px 8px; border-radius: 8px;
  font-family: var(--mono-font);
  background: var(--card-bg);
}

